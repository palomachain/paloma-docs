(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{281:function(e,t,a){"use strict";a.r(t);var s=a(13),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"set-up-a-production-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-up-a-production-environment"}},[e._v("#")]),e._v(" Set up a production environment")]),e._v(" "),t("p",[e._v("Use the following information to set up and manage your production-level\nfull Paloma node.")]),e._v(" "),t("p",[e._v("For information about running a validator node, visit the\n"),t("RouterLink",{attrs:{to:"/guide/node-management/manage-a-Paloma-validator/"}},[e._v("validator guide")]),e._v(".")],1),e._v(" "),t("h2",{attrs:{id:"create-a-dedicated-user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-dedicated-user"}},[e._v("#")]),e._v(" Create a dedicated user")]),e._v(" "),t("p",[e._v("Although "),t("code",[e._v("Palomad")]),e._v(" does not require a super user account, during the\nsetup process you'll need super user permission to create and modify\nsome files. It is strongly recommended to use a normal user when\nrunning "),t("code",[e._v("Palomad")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"increase-the-maximum-files-palomad-can-open"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#increase-the-maximum-files-palomad-can-open"}},[e._v("#")]),e._v(" Increase the maximum files "),t("code",[e._v("Palomad")]),e._v(" can open")]),e._v(" "),t("p",[t("code",[e._v("Palomad")]),e._v(" is set to open 1024 files by default. It is recommended\nthat you increase this amount.")]),e._v(" "),t("p",[e._v("Modify "),t("code",[e._v("/etc/security/limits.conf")]),t("a",{attrs:{href:"https://linux.die.net/man/5/limits.conf",target:"_blank",rel:"noopener noreferrer"}},[e._v("*"),t("OutboundLink")],1),e._v("\nto increase the amount, where "),t("code",[e._v("nofile")]),e._v(" is the number of files "),t("code",[e._v("Palomad")]),e._v(" can open.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If you have never changed this system config or your system is fresh, most of this file will be commented")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ...")]),e._v("\n*                soft    nofile          "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("65535")]),e._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Uncomment the following two lines at the bottom")]),e._v("\n*                hard    nofile          "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("65535")]),e._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Change the default values to ~65535")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ...")]),e._v("\n")])])]),t("h1",{attrs:{id:"run-the-server-as-a-daemon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-the-server-as-a-daemon"}},[e._v("#")]),e._v(" Run the server as a daemon")]),e._v(" "),t("p",[t("code",[e._v("Palomad")]),e._v(" must be running at all times. It is recommended that you\nregister "),t("code",[e._v("Palomad")]),e._v(" as a "),t("code",[e._v("systemd")]),e._v(" service so that it will be started\nautomatically when the system reboots.")]),e._v(" "),t("h2",{attrs:{id:"register-palomad-as-a-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#register-palomad-as-a-service"}},[e._v("#")]),e._v(" Register "),t("code",[e._v("Palomad")]),e._v(" as a service")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Create a service definition file in "),t("code",[e._v("/etc/systemd/system/Palomad.service")]),e._v(".")]),e._v(" "),t("p",[t("strong",[e._v("Example")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("Paloma Daemon\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("simple\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("User")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Paloma_USER"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("PATH_TO_PalomaD"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/Palomad start  \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("on-abort\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("multi-user.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("LimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("65535")]),e._v("  \n")])])])]),e._v(" "),t("li",[t("p",[e._v("Modify the "),t("code",[e._v("Service")]),e._v(" section according to your environment:")]),e._v(" "),t("ul",[t("li",[e._v("Enter the user (likely your username, unless you created a user\nspecifically for "),t("code",[e._v("Palomad")]),e._v(")")]),e._v(" "),t("li",[e._v("Enter the path to the "),t("code",[e._v("Palomad")]),e._v(" executable. "),t("code",[e._v("<PATH_TO_PalomaD>")]),e._v("\nis likely "),t("code",[e._v("/home/<YOUR_USER>/go/bin/Palomad")]),e._v(" or "),t("code",[e._v("/usr/go/bin")]),e._v(".\nConfirm this with "),t("code",[e._v("whereis Palomad")])]),e._v(" "),t("li",[e._v("Make sure you made the correct edits to /etc/security/limits.conf")])])]),e._v(" "),t("li",[t("p",[e._v("Run "),t("code",[e._v("systemctl daemon-reload")]),e._v(" followed by "),t("code",[e._v("systemctl enable Palomad")]),e._v(".\nThis will register "),t("code",[e._v("Palomad")]),e._v(" as a system service and turn it on upon startup.")])]),e._v(" "),t("li",[t("p",[e._v("Now start the serivce with "),t("code",[e._v("systemctl start Palomad")]),e._v(".")])])]),e._v(" "),t("h3",{attrs:{id:"controlling-the-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#controlling-the-service"}},[e._v("#")]),e._v(" Controlling the service")]),e._v(" "),t("p",[e._v("Use "),t("code",[e._v("systemctl")]),e._v(" to start, stop, and restart the service:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Check health")]),e._v("\nsystemctl status Palomad\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Start")]),e._v("\nsystemctl start Palomad\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Stop")]),e._v("\nsystemctl stop Palomad\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Restart")]),e._v("\nsystemctl restart Palomad\n")])])]),t("h3",{attrs:{id:"access-logs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#access-logs"}},[e._v("#")]),e._v(" Access logs")]),e._v(" "),t("p",[e._v("Use "),t("code",[e._v("journalctl -t")]),e._v(" to access entire logs, entire logs in reverse,\nand the latest and continuous log.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Entire log reversed")]),e._v("\njournalctl -t Palomad -r\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Entire log")]),e._v("\njournalctl -t Palomad\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Latest and continuous")]),e._v("\njournalctl -t Palomad -f\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);