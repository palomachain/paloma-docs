(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{292:function(a,t,s){"use strict";s.r(t);var e=s(13),o=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"troubleshoot-validator-problems"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshoot-validator-problems"}},[a._v("#")]),a._v(" Troubleshoot validator problems")]),a._v(" "),t("p",[a._v("Use this guide to solve the most common validator problems.")]),a._v(" "),t("h2",{attrs:{id:"validator-has-0-voting-power"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validator-has-0-voting-power"}},[a._v("#")]),a._v(" Validator has 0 voting power")]),a._v(" "),t("p",[a._v("If your validator has 0 voting power, your validator has become auto-unbonded.\nOn the mainnet, validators unbond when they do not vote on "),t("code",[a._v("9500")]),a._v(" of the last "),t("code",[a._v("10000")]),a._v("\nblocks ("),t("code",[a._v("50")]),a._v(" of the last "),t("code",[a._v("100")]),a._v(" blocks on the testnet). Because blocks are proposed every\n~5 seconds, a validator that is unresponsive for ~13 hours (~4 minutes on testnet)\nbecome unbonded. This problem usually happens when your "),t("code",[a._v("Palomad")]),a._v(" process crashes.")]),a._v(" "),t("p",[a._v("To return the voting power back to your validator:")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("If "),t("code",[a._v("Palomad")]),a._v(" is not running, restart it:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad start\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Wait for your full node to reach the latest block, and run:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad tx slashing unjail "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Paloma"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --chain-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("chain_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --from"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("from"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[t("code",[a._v("<Paloma>")]),a._v(" is the address of your validator account.")]),a._v(" "),t("li",[t("code",[a._v("<name>")]),a._v(" is the name of the validator account. To find this information, run "),t("code",[a._v("Palomad keys list")]),a._v(".")])]),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),t("p",[a._v("If you don't wait for "),t("code",[a._v("Palomad")]),a._v(" to sync before running "),t("code",[a._v("unjail")]),a._v(", an error\nmessage will inform you that your validator is still jailed.")])])]),a._v(" "),t("li",[t("p",[a._v("Check your validator again to see if your voting power is back:")])])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad status\n")])])]),t("p",[a._v("If your voting power is less than it was previously, you may have been slashed for downtime.")]),a._v(" "),t("h2",{attrs:{id:"palomad-crashes-because-of-too-many-open-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#palomad-crashes-because-of-too-many-open-files"}},[a._v("#")]),a._v(" "),t("code",[a._v("Palomad")]),a._v(" crashes because of too many open files")]),a._v(" "),t("p",[a._v("The default number of files Linux can open per process is "),t("code",[a._v("1024")]),a._v(". "),t("code",[a._v("Palomad")]),a._v(" is\nknown to open more than this amount, causing the process to crash.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("Increase the number of open files allowed by running "),t("code",[a._v("ulimit -n 4096")]),a._v(".")])]),a._v(" "),t("li",[t("p",[a._v("Restart the process with "),t("code",[a._v("Palomad start")]),a._v(".")]),a._v(" "),t("p",[a._v("If you are using "),t("code",[a._v("systemd")]),a._v(" or another process manager to launch "),t("code",[a._v("Palomad")]),a._v(",\nyou might need to configure them. The following  sample "),t("code",[a._v("systemd")]),a._v(" file fixes\nthe problem:")]),a._v(" "),t("div",{staticClass:"language-systemd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-systemd"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/systemd/system/Palomad.service")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Unit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("Paloma Testnet Node")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("After")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("network.target")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("simple")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("ubuntu")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("WorkingDirectory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/home/ubuntu")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/home/ubuntu/go/bin/Palomad start")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("on-failure")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("RestartSec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("LimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("4096")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("multi-user.target")]),a._v("\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"palomad-crashes-because-of-memory-fragmentation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#palomad-crashes-because-of-memory-fragmentation"}},[a._v("#")]),a._v(" "),t("code",[a._v("Palomad")]),a._v(" crashes because of memory fragmentation")]),a._v(" "),t("p",[a._v("As described in "),t("a",{attrs:{href:"https://github.com/Paloma-money/core/issues/592",target:"_blank",rel:"noopener noreferrer"}},[a._v("this issue"),t("OutboundLink")],1),a._v(", huge\nmemory allocation can cause memory fragmentation issue. Temporal solution is just using\nsmall wasm cache size like 50~100MB.")]),a._v(" "),t("p",[t("code",[a._v("v0.5.10+")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-toml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-toml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key property"}},[a._v("contract-memory-cache-size")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("\n")])])]),t("p",[t("code",[a._v("v0.5.7~v0.5.9")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-toml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-toml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key property"}},[a._v("write-vm-memory-cache-size")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("\n")])])]),t("h2",{attrs:{id:"the-validator-is-not-active"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-validator-is-not-active"}},[a._v("#")]),a._v(" The validator is not active")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("The validator is jailed. To solve this problem, "),t("code",[a._v("unjail")]),a._v(" the validator by running:")]),a._v(" "),t("p",[t("code",[a._v("Palomad tx slashing unjail <Paloma> --chain-id=<chain_id> --from=<from>")])])]),a._v(" "),t("li",[t("p",[a._v("The validator is not in the "),t("RouterLink",{attrs:{to:"/guide/learn/glossary.html#active-set"}},[a._v("active validator set")]),a._v(".\nOnly the top 130 validators are in this set. To fix this problem, increase your total\nstake to be larger than the 130th validator.")],1)])])])}),[],!1,null,null,null);t.default=o.exports}}]);