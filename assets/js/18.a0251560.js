(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{282:function(a,t,s){"use strict";s.r(t);var e=s(13),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sync"}},[a._v("#")]),a._v(" Sync")]),a._v(" "),t("h2",{attrs:{id:"before-sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#before-sync"}},[a._v("#")]),a._v(" Before Sync")]),a._v(" "),t("p",[a._v('Certain files will need to be absent or deleted prior to download.\nA quicksync replaces blockchain data with a customized snapshot.\nFor most use cases a "pruned" version is adequate. Pruned versions\nwill have certain transactions removed from the archive to make node\nperformance smoother. If you are running a node for archival purposes,\nyou will want an "archive" or "default" download.')]),a._v(" "),t("p",[a._v("After choosing  the appropriate download type, examine your node and\nensure that "),t("code",[a._v(".Paloma/data")]),a._v(" is empty.")]),a._v(" "),t("p",[t("strong",[a._v("Example")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(":22PM INF Removed all blockchain "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("history")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/ubuntu/.Paloma/data\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),t("p",[a._v("If you are a validator, ensure that you do not remove your private key.")]),a._v(" "),t("p",[a._v("Example of a removed private key:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(":22PM INF Reset private validator "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" to genesis state "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("keyFile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/ubuntu/.Paloma/config/priv_validator_key.json "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("stateFile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/ubuntu/.Paloma/data/priv_validator_state.json\n")])])])]),a._v(" "),t("p",[a._v("If you have an address book downloaded, you may keep it. Otherwise,\nyou will need to download the\n"),t("RouterLink",{attrs:{to:"/guide/node-management/full-node/join-a-network.html#join-a-public-network"}},[a._v("appropriate addressbook")]),a._v("\nprior to running "),t("code",[a._v("Palomad start")]),a._v(".")],1),a._v(" "),t("h2",{attrs:{id:"during-sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#during-sync"}},[a._v("#")]),a._v(" During Sync")]),a._v(" "),t("p",[a._v("After "),t("RouterLink",{attrs:{to:"/guide/node-management/full-node/join-a-network.html#join-a-public-network"}},[a._v("Joining a public network")]),a._v(",\nyour node will begin to sync.")],1),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("Sync start times")]),a._v(" "),t("p",[a._v("Nodes take at least an hour to start syncing. This wait is normal.\nBefore troubleshooting a sync, please wait an hour for the sync to start.")])]),a._v(" "),t("h2",{attrs:{id:"monitor-the-sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitor-the-sync"}},[a._v("#")]),a._v(" Monitor the sync")]),a._v(" "),t("p",[a._v("Your node is catching up with the network by replaying all the transactions\nfrom genesis and recreating the blockchain state locally. You can verify\nthis process by checking the "),t("code",[a._v("latest_block_height")]),a._v(" in the "),t("code",[a._v("SyncInfo")]),a._v(" of\nthe "),t("code",[a._v("Palomad status")]),a._v(" response:")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"SyncInfo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"latest_block_height"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"42"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" <-----\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"catching_up"')]),a._v("        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  ...\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Compare this height to the "),t("strong",[a._v("Latest Blocks")]),a._v(" on "),t("a",{attrs:{href:"https://Paloma.stake.id/#/",target:"_blank",rel:"noopener noreferrer"}},[a._v("stake.id"),t("OutboundLink")],1),a._v("\nto see your progress.")]),a._v(" "),t("h2",{attrs:{id:"quicksync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#quicksync"}},[a._v("#")]),a._v(" Quicksync")]),a._v(" "),t("p",[a._v("You can significantly accelerate the synchronization process by providing\n"),t("code",[a._v("Palomad")]),a._v(" with a recent snapshot of the network state. Snapshots are made\npublicly available by the Paloma community and can be downloaded at\n"),t("a",{attrs:{href:"https://quicksync.io/networks/Paloma.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://quicksync.io/networks/Paloma.html"),t("OutboundLink")],1),a._v(".\nChoose the snapshot corresponding to your network type ("),t("code",[a._v("testnet")]),a._v("/"),t("code",[a._v("mainnet")]),a._v(")\nand a mirror close to the location of your node server.")]),a._v(" "),t("p",[a._v("Before downloading a snapshot, make sure that you have the streaming and\nunpacking utilities installed:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" liblz4-tool aria2 -y\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("Copy the download URL")]),a._v(" "),t("p",[a._v("Don't click the download link if you are using a separately hosted\nnode, as this will not download to the correct machine. Instead,\ncopy the link by right-clicking the  "),t("code",[a._v("Download")]),a._v(" button. Downloading\nlocally is not recommended unless you are hosting your node on the\nsame computer from which you are browsing.")]),a._v(" "),t("p",[a._v("The link in your clipboard should resemble the following:")]),a._v(" "),t("p",[t("em",[t("strong",[a._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4")])])])]),a._v(" "),t("p",[a._v("The archived snapshot contains the state and transactions of\nthe network, which are stored in the "),t("code",[a._v("~/.Paloma/data/")]),a._v(" folder by\ndefault. You should navigate exactly to the "),t("code",[a._v("~/.Paloma/")]),a._v(" folder\nbefore proceeding to unpack it, or make sure that the contents of\nthe archive are placed into "),t("code",[a._v("~/.Paloma/")]),a._v(".")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("Download the snapshot.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# aria2c is a multi-source command-line download utility")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# specify N cores(up to 16) to speed up the process via -xN (5 cores used below)")]),a._v("\naria2c -x5 https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Unpack the "),t("code",[a._v(".lz4")]),a._v(" archive:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("lz4 -d bombay-12-default.20220107.0510.tar.lz4\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Unpack the "),t("code",[a._v(".tar")]),a._v(" archive into "),t("code",[a._v("~/.Paloma")]),a._v(". Its contents must replace "),t("code",[a._v("~/.Paloma/data/")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -xvf bombay-12-default.20220107.0510.tar\n")])])]),t("p",[a._v("Due to the size of the network, this may take some time.")])]),a._v(" "),t("li",[t("p",[a._v("After the snapshot is completely unpacked, start "),t("code",[a._v("Palomad")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad start\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"sync-complete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sync-complete"}},[a._v("#")]),a._v(" Sync Complete")]),a._v(" "),t("p",[a._v("You can tell that your node is in sync with the network when\n"),t("code",[a._v("SyncInfo.catching_up")]),a._v(" in the "),t("code",[a._v("Palomad status")]),a._v(" response returns\n"),t("code",[a._v("false")]),a._v(" and the "),t("code",[a._v("latest_block_height")]),a._v(" corresponds to the public\nnetwork blockheight found on "),t("a",{attrs:{href:"https://Paloma.stake.id/#/",target:"_blank",rel:"noopener noreferrer"}},[a._v(" stake.id "),t("OutboundLink")],1),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad status  \n")])])]),t("p",[t("strong",[a._v("Example")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"SyncInfo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"latest_block_height"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"7356350"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"catching_up"')]),a._v("        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  ...\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Validators can view the status of the network using\n"),t("a",{attrs:{href:"https://finder.Paloma.money",target:"_blank",rel:"noopener noreferrer"}},[a._v("Paloma Finder"),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("h2",{attrs:{id:"verify-the-snapshot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verify-the-snapshot"}},[a._v("#")]),a._v(" Verify the snapshot")]),a._v(" "),t("p",[a._v("To verify the validity of the snapshot, use a "),t("code",[a._v("sha512sum")]),a._v(" to check\nit against a cosmos validator's registry of transactions.")]),a._v(" "),t("h3",{attrs:{id:"compare-checksum-with-its-on-chain-version"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compare-checksum-with-its-on-chain-version"}},[a._v("#")]),a._v(" Compare checksum with its on-chain version.")]),a._v(" "),t("p",[a._v("For this example, use the following snapshot URL:")]),a._v(" "),t("p",[t("code",[a._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4")])]),a._v(" "),t("ol",[t("li",[t("p",[a._v("To make things easier for checking, assign the URL to a variable:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Obtain the checksum for the snapshot:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$URL")]),a._v(".checksum\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# bombay-12-default.20220 100%[==============================>]  59.55K   215KB/   s    in 0.3s    ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 2022-01-08 07:30:06 (215 KB/s) - 'bombay-12-   default.20220107.0510.tar.lz4.checksum.1' saved [60984/60984]")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Obtain the tx hash and assign it to a variable for brevity:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HASH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -s $URL.hash"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("   \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 80E12115FEA1B3A161A2FDE7367FC34B8714EF398DAE5B1396F9748BC6218DB1")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Obtain the transaction profile and verify it:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -s https://lcd-cosmos.cosmostation.io/txs/"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -s $URL.hash"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq -r    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.tx.value.memo'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("sha512sum -c\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# bombay-12-default.20220107.0510.tar.lz4.checksum: OK")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("Obtain the checksum script and verify the provided snapshot:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://raw.githubusercontent.com/chainlayer/quicksync-playbooks/master/   roles/quicksync/files/checksum.sh\n./checksum.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("basename")]),a._v(" $URL"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"sync-faster-during-testing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sync-faster-during-testing"}},[a._v("#")]),a._v(" Sync faster during testing")]),a._v(" "),t("p",[a._v("Sometimes you may want to sync faster by foregoing checks.\nThis command should only be used by advanced users in non-production\nenvironments. To speed up the sync process during testing, use the\nfollowing command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Palomad start --x-crisis-skip-assert-invariants\n")])])]),t("h2",{attrs:{id:"congratulations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#congratulations"}},[a._v("#")]),a._v(" Congratulations!")]),a._v(" "),t("p",[a._v("You've successfully joined a network as a full node operator.\nIf you are a validator, continue to\n"),t("RouterLink",{attrs:{to:"/guide/node-management/manage-a-Paloma-validator/"}},[a._v("manage a Paloma validator")]),a._v(" for the next steps.")],1)])}),[],!1,null,null,null);t.default=n.exports}}]);